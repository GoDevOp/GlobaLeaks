<h3 data-translate>Private key and certificate signature request (CSR) generator</h3>
<div data-ng-form name="certSigRequestForm" class="form-horizontal">
  <p data-translate>
    <span data-translate>This form will generate a private key for deploying HTTPS with Globaleaks.</span>
    <span data-translate>It will also generate the request most a certificate authority will need to validate the certificate</span>
    <span data-translate>Use the following form if you plan issue a certificate with a certificate authority and you do not already have a private key.</span>
    <span data-translate>Once you are finished with this form, you will need to ensure that the domain you are intending to host the certificate on is validated by the authority.</span>
  </p>

  <div class="form-group">
    <label class="col-md-4 control-label" data-translate>Domain Name</label>
    <div class="col-md-8">
      <input class="form-control" type="text" data-ng-model="csr_cfg.commonname" required/>
    </div>
  </div>

  <div class="form-group">
    <label class="col-md-4 control-label" data-translate>Country name</label>
    <div class="col-md-8">
      <input class="form-control" type="text" data-ng-model="csr_cfg.country" required/>
    </div>
  </div>
  <div class="form-group">
    <label class="col-md-4 control-label" data-translate>State or Province name</label>
    <div class="col-md-8">
      <input class="form-control" data-ng-model="csr_cfg.province" type="text" required/>
    </div>
  </div>

  <div class="form-group">
    <label class="col-md-4 control-label" data-translate>Locality name</label>
    <div class="col-md-8">
      <input class="form-control" data-ng-model="csr_cfg.city" type="text" required/>
    </div>
  </div>

  <div class="form-group">
    <label class="col-md-4 control-label" data-translate>Organization</label>
    <div class="col-md-8">
      <input class="form-control" data-ng-model="csr_cfg.company" required/>
    </div>
  </div>

  <div class="form-group">
    <label class="col-md-4 control-label" data-translate>Organizational unit</label>
    <div class="col-md-8">
      <input class="form-control" data-ng-model="csr_cfg.department"
        data-ng-class="{'has-error': certSigRequestForm.department.$error}"
      />
    </div>
  </div>

  <div class="form-group">
    <label class="col-md-4 control-label" data-translate>Email</label>
    <div class="col-md-8">
      <input class="form-control" data-ng-model="csr_cfg.email" type="text" required/>
    </div>
  </div>

  <div class="panel panel-danger" data-ng-if="certSigRequestForm.$invalid && certSigRequestForm.$dirty">
    <div class="panel-heading">
      <b data-translate>Errors</b>
    </div>
    <div class="panel-body text-danger">
      <ul>
        <li data-ng-repeat="(key, error) in certSigRequestForm.$error track by $index">
          <span>{{ key }} {{ error }}</span>
        </li>
      </ul>
    </div>
  </div>

  <div class="panel panel-default" data-ng-if="csr_state.success">
    <div class="panel-heading">
      <b data-translate>Success! Here is the certificate request (cert_req.pem)</b>
      <i class="glyphicon glyphicon-check"></i>
    </div>
    <div class="panel-body">
      <pre>{{ csr_state.text }}</pre>
      <button class="btn btn-sm btn-default">
        <i class="glyphicon glyphicon-download"></i>
        <span data-translate>Download</span>
      </button>
    </div>
  </div>

  <button class="btn btn-success" ng-click="go('configure_start')">
    <i class="glyphicon glyphicon-left"></i>
    <span data-translate>Previous</span>
  </button>
  <button class="btn btn-success" ng-click="submitCSR()">
    <i class="glyphicon glyphicon-check"></i>
    <span data-translate>Generate Key</span>
  </button>
  <button class="btn btn-warning" ng-click="go('cert_upload')">
    <i class="glyphicon glyphicon-arrow-right"></i>
    <span data-translate>Skip</span>
  </button>
</div>
